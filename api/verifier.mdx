---
title: Verifier API
description: Verify zero-knowledge proofs using the Verify trait
---

## Overview

The `provekit_verifier` crate provides the `Verify` trait for verifying zero-knowledge proofs generated by the prover. The verifier checks that a proof is valid for the given R1CS constraint system.

## Verify Trait

```rust
pub trait Verify {
    fn verify(&mut self, proof: &NoirProof) -> Result<()>;
}
```

Implemented for the `Verifier` type from `provekit_common::Verifier`.

## Methods

### verify

Verifies a zero-knowledge proof against the R1CS constraint system.

<ParamField path="proof" type="&NoirProof" required>
  The proof to verify, containing public inputs and WHIR R1CS proof data
</ParamField>

**Returns:** `Result<()>` - Ok if proof is valid, Error otherwise

**Note:** The verifier can only be used once. After calling `verify`, the internal WHIR state is consumed and subsequent calls will fail.

**Example:**

```rust
use provekit_verifier::Verify;

let mut verifier = Verifier::from_noir_proof_scheme(scheme);
verifier.verify(&proof)?;

println!("Proof verified successfully!");
```

## Verifier Type

```rust
pub struct Verifier {
    pub r1cs: R1CS,
    pub whir_for_witness: Option<WhirR1CSScheme>,
    pub abi: Abi,
}
```

### Fields

<ParamField path="r1cs" type="R1CS">
  R1CS constraint system (A, B, C matrices) to verify against
</ParamField>

<ParamField path="whir_for_witness" type="Option<WhirR1CSScheme>">
  WHIR protocol configuration. Set to `None` after first verification (consumed)
</ParamField>

<ParamField path="abi" type="Abi">
  ABI information from the original Noir program
</ParamField>

### Methods

#### from_noir_proof_scheme

Constructs a `Verifier` from a compiled `NoirProofScheme`.

```rust
pub fn from_noir_proof_scheme(scheme: NoirProofScheme) -> Self
```

**Example:**

```rust
use provekit_common::Verifier;

let verifier = Verifier::from_noir_proof_scheme(scheme);
```

## Verification Process

The verification process:

1. Initializes NTT and hash engines (via `register_ntt()`)
2. Extracts public inputs from the proof
3. Verifies the WHIR R1CS proof against the constraint system
4. Consumes the WHIR state (verifier cannot be reused)

## Error Handling

The verify method returns errors in these cases:

- **Already consumed**: Verifier has already been used once
- **Invalid proof**: Proof does not satisfy the constraint system
- **Public input mismatch**: Public inputs don't match expected values

**Example:**

```rust
use provekit_verifier::Verify;

let mut verifier = Verifier::from_noir_proof_scheme(scheme);

match verifier.verify(&proof) {
    Ok(()) => println!("Valid proof"),
    Err(e) => println!("Verification failed: {}", e),
}

// This will fail - verifier already consumed
// verifier.verify(&proof)?;
```

## Public Inputs

Public inputs are automatically extracted from the proof and verified as part of the R1CS constraint check. The verifier ensures:

- Public inputs match the circuit's expected format
- Public inputs satisfy their position in the witness vector
- R1CS constraints hold for the given public inputs

## Performance

Verification is significantly faster than proof generation:

- **Prover**: O(n log n) where n = number of constraints
- **Verifier**: O(logÂ² n) with succinct verification

The WHIR protocol provides logarithmic verification time in the constraint system size.

## Source Reference

- Implementation: `provekit/verifier/src/lib.rs:10-26`
- Type definition: `provekit/common/src/verifier.rs:9-26`