---
title: "HTTP API"
description: "REST API for recursive verification of zero-knowledge proofs"
---

## Starting the Server

Start the HTTP server on port 3000:

```bash
go run cmd/server/main.go
```

The server will be available at `http://localhost:3000`.

## Server Configuration

The server is configured with the following settings:

- **Port**: 3000
- **Read Timeout**: 10 minutes (for file uploads)
- **Write Timeout**: 5 minutes (for responses)
- **Idle Timeout**: 90 minutes (total connection time)
- **Body Limit**: 2GB (total size for params and R1CS files)
- **CORS**: Enabled with permissive settings
- **Server Header**: `Recursive-Verifier`

## Endpoints

### Health Check

<CodeGroup>

```bash cURL
curl http://localhost:3000/api/v1/ping
```

```javascript JavaScript
fetch('http://localhost:3000/api/v1/ping')
  .then(response => response.text())
  .then(data => console.log(data));
```

```python Python
import requests

response = requests.get('http://localhost:3000/api/v1/ping')
print(response.text)
```

</CodeGroup>

**GET** `/api/v1/ping`

Returns a simple health check response.

**Response:**
```
pong
```

### Verify Proof

**POST** `/api/v1/verify`

Generic endpoint for verifying proofs with trusted setup keys (vk/pk) generated by the server or provided via URLs.

#### Request Format

Send a `multipart/form-data` POST request with the following fields:

<ParamField body="config" type="file" required>
  JSON configuration file containing verifier circuit parameters.
</ParamField>

<ParamField body="r1cs" type="file">
  R1CS JSON file describing the constraint system of the inner circuit.
  
  Required if `r1cs_url` is not provided.
</ParamField>

<ParamField body="r1cs_url" type="string">
  Publicly exposed URL for downloading the R1CS file.
  
  Takes precedence over the `r1cs` file if both are provided.
</ParamField>

<ParamField body="pk_url" type="string" required>
  Publicly exposed URL for downloading the proving key.
  
  Must be provided together with `vk_url`.
</ParamField>

<ParamField body="vk_url" type="string" required>
  Publicly exposed URL for downloading the verifying key.
  
  Must be provided together with `pk_url`.
</ParamField>

<ParamField body="output_ccs_path" type="string">
  Optional path to save the constraint system object.
</ParamField>

#### Example Requests

<CodeGroup>

```bash cURL (Files)
curl -X POST http://localhost:3000/api/v1/verify \
  -F "config=@params_for_recursive_verifier" \
  -F "r1cs=@r1cs.json" \
  -F "pk_url=https://example.com/keys/proving_key.bin" \
  -F "vk_url=https://example.com/keys/verifying_key.bin"
```

```bash cURL (URLs)
curl -X POST http://localhost:3000/api/v1/verify \
  -F "config=@params_for_recursive_verifier" \
  -F "r1cs_url=https://example.com/r1cs.json" \
  -F "pk_url=https://example.com/keys/proving_key.bin" \
  -F "vk_url=https://example.com/keys/verifying_key.bin"
```

```javascript JavaScript
const formData = new FormData();
formData.append('config', configFile);
formData.append('r1cs', r1csFile);
formData.append('pk_url', 'https://example.com/keys/proving_key.bin');
formData.append('vk_url', 'https://example.com/keys/verifying_key.bin');

fetch('http://localhost:3000/api/v1/verify', {
  method: 'POST',
  body: formData
})
  .then(response => response.json())
  .then(data => console.log(data));
```

```python Python
import requests

files = {
    'config': open('params_for_recursive_verifier', 'rb'),
    'r1cs': open('r1cs.json', 'rb')
}

data = {
    'pk_url': 'https://example.com/keys/proving_key.bin',
    'vk_url': 'https://example.com/keys/verifying_key.bin'
}

response = requests.post(
    'http://localhost:3000/api/v1/verify',
    files=files,
    data=data
)

print(response.json())
```

</CodeGroup>

#### Response Format

<ResponseField name="status" type="string">
  Status of the verification request. Returns `"success"` on successful verification.
</ResponseField>

<ResponseField name="message" type="string">
  Human-readable message describing the result.
</ResponseField>

**Success Response (200)**

```json
{
  "status": "success",
  "message": "Verification completed successfully"
}
```

**Error Response (400)**

```json
{
  "error": "Verification failed",
  "details": "invalid proof: constraint not satisfied"
}
```

```json
{
  "error": "Missing required parameters",
  "details": "Both pk_url and vk_url must be provided"
}
```

## HTTP Status Codes

The API uses the following HTTP status codes:

| Status Code | Description |
|-------------|-------------|
| **200** | Verification successful |
| **400** | Bad request (missing files, invalid parameters, verification failed) |
| **500** | Internal server error |

## Error Handling

The API returns detailed error messages in JSON format for all error cases:

<CodeGroup>

```json Missing Files
{
  "error": "Failed to get config file",
  "details": "no config file provided: multipart: NextPart: EOF"
}
```

```json Invalid JSON
{
  "error": "Verification failed",
  "details": "failed to unmarshal config JSON: invalid character..."
}
```

```json Missing Keys
{
  "error": "Missing required parameters",
  "details": "Both pk_url and vk_url must be provided"
}
```

```json Key Download Failed
{
  "error": "Failed to fetch keys",
  "details": "failed to download proving key: 404 Not Found"
}
```

```json Verification Failed
{
  "error": "Verification failed",
  "details": "constraint #42 not satisfied"
}
```

</CodeGroup>

## File Requirements

### Config File

The configuration file must be a valid JSON file containing verifier circuit parameters. This file defines the structure and constraints of the verifier circuit.

### R1CS File

The R1CS (Rank-1 Constraint System) file must be a valid JSON file describing the constraint system of the inner circuit being verified. It contains:

- Constraint matrices
- Variable mappings
- Public inputs/outputs

### Proving and Verifying Keys

Both `pk_url` and `vk_url` must point to valid binary files containing the proving and verifying keys from a trusted setup. These keys must match the constraint system defined in the config and R1CS files.

<Warning>
  Both `pk_url` and `vk_url` are required for the `/api/v1/verify` endpoint. The server will return a 400 error if either is missing.
</Warning>

## CORS Configuration

The server is configured with permissive CORS settings:

- **Allowed Origins**: `*` (all origins)
- **Allowed Headers**: `Origin, Content-Type, Content-Length, Authorization, Cookie`
- **Allowed Methods**: `GET, POST, PUT, DELETE, PATCH`
- **Max Age**: 12 hours

## Performance Considerations

### Timeouts

- **Upload Time**: Up to 10 minutes for uploading files
- **Processing Time**: Up to 90 minutes for proof verification
- **Response Time**: Up to 5 minutes for sending the response

### File Size Limits

The maximum total request size is **2GB**, which includes all uploaded files and form data. This limit is sufficient for large constraint systems and proving keys.

### Recommendations

- Use `r1cs_url`, `pk_url`, and `vk_url` parameters when possible to avoid uploading large files
- Ensure your HTTP client has appropriate timeout settings for long-running verifications
- Monitor server logs for detailed verification progress and error messages

## Implementation Reference

The HTTP API is implemented in Go using the Fiber framework. Key implementation files:

- `/cmd/server/main.go:48` - `/api/v1/verify` endpoint handler
- `/cmd/server/main.go:55` - `/api/v1/ping` endpoint handler
- `/app/common/common.go` - `BuildOps` structure for configuration

## Next Steps

<CardGroup cols={2}>
  <Card title="CLI Overview" icon="terminal" href="/recursive-verifier/overview">
    Learn about the command-line interface
  </Card>
  <Card title="ProveKit SDK" icon="code" href="/sdk/overview">
    Integrate verification into your application
  </Card>
</CardGroup>